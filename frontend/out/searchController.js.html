<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: searchController.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: searchController.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>angular.module('chemGeno')
.controller('searchController', ['$scope', 'searchService', '$state',
  function($scope, searchService, $state) {
   $scope.target = [];
   $scope.mentors = [];
   $scope.mentored = [];
   $scope.supervisors = [];
   $scope.supervised = [];

   // probably should've just put institutions with people
   $scope.$on('search:response', function(event,data) {
     $scope.clearResults();
     console.log(data);


       var targetInstitution =
          $scope.findInstitution(data.target.institution_id, data.institutions);
      var _target = {
        name: data.target.name,
        institution: targetInstitution,
        position: data.target.position,
        id: data.target.id
      };
      $scope.target.push(_target);
      // TODO: refactor method into sub methods
      var toPush = [];
      for(var i = 0; i &lt; data.mentors.length; i++) {
        var _mentor_ = data.mentors[i];
        var inst = $scope.findInstitution(_mentor_.institution_id,
          data.institutions);

        var mentor = {
          name: _mentor_.name,
          institution: inst,
          position: _mentor_.position
        };
        toPush.push(mentor)
      }
      $scope.mentors = toPush;

      var toPush = [];
      for(var i = 0; i &lt; data.mentored.length; i++) {
        var _mentor_ = data.mentored[i];
        var inst = $scope.findInstitution(_mentor_.institution_id,
          data.institutions);

        var mentor = {
          name: _mentor_.name,
          institution: inst,
          position: _mentor_.position
        };
        toPush.push(mentor)
      }
      $scope.mentored = toPush;

      var toPush = [];
      for(var i = 0; i &lt; data.supervised.length; i++) {
        var _supervisor_ = data.supervised[i];
        var inst = $scope.findInstitution(_supervisor_.institution_id,
          data.institutions);

        var mentor = {
          name: _supervisor_.name,
          institution: inst,
          position: _supervisor_.position
        };
        toPush.push(_supervisor_)
      }
      $scope.supervised = toPush;

      var toPush = [];
      for(var i = 0; i &lt; data.supervisors.length; i++) {
        var _supervisor_ = data.supervisors[i];
        var inst = $scope.findInstitution(_supervisor_.institution_id,
          data.institutions);

        var mentor = {
          name: _supervisor_.name,
          institution: inst,
          position: _supervisor_.position
        };
        toPush.push(_supervisor_)
      }
      $scope.supervisors = toPush;

   });

   $scope.findInstitution = function(id, institutions) {
     for(var i = 0; i &lt; institutions.length; i++){
       if (institutions[i].id === id) {
         return institutions[i].name;
       }
     }
   }
      /**
       * My work
       */


      $scope.goToView = function(person){
          console.log("goToView function called! :) ");
          //alert(person.id);
          console.log(person);
          $state.go('main.view', {id: person.id});

      };


   $scope.clearResults = function() {
     $scope.target = [];
     $scope.mentors = [];
     $scope.mentored = [];
     $scope.supervisors = [];
     $scope.supervised = [];
   }

  }
]);
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Wed Mar 16 2016 04:09:55 GMT-0600 (MDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
