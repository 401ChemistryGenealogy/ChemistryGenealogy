<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>editController.js</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/adminPanelController
                
                Responsible for every functionality given by the administrator panel for the frontend..html">adminPanelController
                
                Responsible for every functionality given by the administrator panel for the frontend.</a></li>
                                <li><a href="../classes/auditTrailController
                
                Responsible for every functionality given by the administrator panel for the frontend..html">auditTrailController
                
                Responsible for every functionality given by the administrator panel for the frontend.</a></li>
                                <li><a href="../classes/editController
                
                Responsible for every functionality given by the administrator panel for the frontend..html">editController
                
                Responsible for every functionality given by the administrator panel for the frontend.</a></li>
                                <li><a href="../classes/GruntFile
                
                Was attempting to do gruntdocs....html">GruntFile
                
                Was attempting to do gruntdocs...</a></li>
                                <li><a href="../classes/mentorshipNotificationController
                
                Notifications for mentorships are dealt with here..html">mentorshipNotificationController
                
                Notifications for mentorships are dealt with here.</a></li>
                                <li><a href="../classes/muserController
                
                The user controller is located here, that handles the affairs dealing with the users of the application
                working with the application..html">muserController
                
                The user controller is located here, that handles the affairs dealing with the users of the application
                working with the application.</a></li>
                                <li><a href="../classes/personAutoController.html">personAutoController</a></li>
                                <li><a href="../classes/personNotificationController
                
                Notifications for persons are dealt with here..html">personNotificationController
                
                Notifications for persons are dealt with here.</a></li>
                                <li><a href="../classes/searchController
                
                Entire Search Functionality located here..html">searchController
                
                Entire Search Functionality located here.</a></li>
                                <li><a href="../classes/submitController
                
                Controller for the Submission page.
                
                
                Status: CONTROLLER
                Associated files: submit.html
                
                The submission page is going to be the core of where the users will be able to supply information to begin a new
                page for a given particular user. This page is going to be essentially a massive collection of information that
                we will be inserting into the system.
                
                Things that we&#x27;re collecting include basic information like:
                -first name
                -last name
                -degree type
                -postdoc postings
                -etc.html">submitController
                
                Controller for the Submission page.
                
                
                Status: CONTROLLER
                Associated files: submit.html
                
                The submission page is going to be the core of where the users will be able to supply information to begin a new
                page for a given particular user. This page is going to be essentially a massive collection of information that
                we will be inserting into the system.
                
                Things that we&#x27;re collecting include basic information like:
                -first name
                -last name
                -degree type
                -postdoc postings
                -etc</a></li>
                                <li><a href="../classes/supervisionNotificationController
                
                Notifications for supervision are dealt with here..html">supervisionNotificationController
                
                Notifications for supervision are dealt with here.</a></li>
                                <li><a href="../classes/userDialogController
                
                 Controller for the User Dialogue
                
                Status: CONTROLLER
                Associated files: userDialog.html,
                
                The user dialog controller is associated with registration and submission of login information. So it is
                slightly associated with the User Controller (userController.js), yet is kept distinct for clarity of functions..html">userDialogController
                
                 Controller for the User Dialogue
                
                Status: CONTROLLER
                Associated files: userDialog.html,
                
                The user dialog controller is associated with registration and submission of login information. So it is
                slightly associated with the User Controller (userController.js), yet is kept distinct for clarity of functions.</a></li>
                                <li><a href="../classes/viewController
                
                This controller does all that can be done with the view page....html">viewController
                
                This controller does all that can be done with the view page...</a></li>
                                <li><a href="../classes/visController
                
                Notifications for mentorships are dealt with here..html">visController
                
                Notifications for mentorships are dealt with here.</a></li>
                            </ul>
                
                
                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/adminPanelController.html">adminPanelController</a></li>
                                <li><a href="../modules/auditTrailController.html">auditTrailController</a></li>
                                <li><a href="../modules/editController.html">editController</a></li>
                                <li><a href="../modules/GruntFile.html">GruntFile</a></li>
                                <li><a href="../modules/mentorshipNotificationController.html">mentorshipNotificationController</a></li>
                                <li><a href="../modules/personAutoController.html">personAutoController</a></li>
                                <li><a href="../modules/personNotificationController.html">personNotificationController</a></li>
                                <li><a href="../modules/searchController.html">searchController</a></li>
                                <li><a href="../modules/submitController.html">submitController</a></li>
                                <li><a href="../modules/supervisionNotificationController.html">supervisionNotificationController</a></li>
                                <li><a href="../modules/userController.html">userController</a></li>
                                <li><a href="../modules/userDialogController.html">userDialogController</a></li>
                                <li><a href="../modules/viewController.html">viewController</a></li>
                                <li><a href="../modules/visController.html">visController</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: editController.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**
 * @module editController
 * @class editController
 *
 * Responsible for every functionality given by the administrator panel for the frontend.
 */

angular.module(&#x27;chemGeno&#x27;)


    //Stating that this is a controller for this project.
    .controller(&#x27;editController&#x27;, [&#x27;$scope&#x27;, &#x27;editService&#x27;, &#x27;viewService&#x27;, &#x27;$location&#x27;, &#x27;$stateParams&#x27;,
        function($scope, editService,  viewService, $location, $stateParams) {

            //POSTDOC TABS:
            // Basic tabs &quot;list&quot; like structure that will hold together all of the data in an appropriate format.
            // Tabs is part of the model as described immediately below:
            // {postDocID, postDocDates, postDocSupervisor, postDocInstitution}
            // Isolate start and end dates.

            var postDocTab = [
                    { postDocID: 1, postDocDates: &#x27;1993-1995&#x27;, postDocSupervisor: &#x27;David Bundle&#x27;,
                        postDocInstitution: &#x27;University of Alberta&#x27;},
                    { postDocID: 2, postDocDates: &#x27;1996-1996&#x27;, postDocSupervisor: &#x27;Morten Meldel&#x27;,
                        postDocInstitution: &#x27;Carlsberg Laboratory&#x27;}
                ],
                selectedPD = null,
                previousPD = null,

            //DEGREE INFO TABS:
            //For our purposes the degree information is used to compile any advanced degrees that a user may have.
            //I elected to use tabs for this as people may have different supervisors for masters vs. PhD or even
            //multiple PhD/masters degrees from various fields. (Eg: Perhaps Chemistry AND Criminal Justice?)
            //Worry less about ID.
                degreeInfoTab =[
                    { degreeInfoID: 1, degreeInfoYear: 1993, degreeInfoSupervisor: &#x27;Ole Hindsgaul&#x27;, degreeInfoInstitution: &#x27;University of Alberta&#x27;}

                ];


            /**
             * This section is concerned with obtaining the object from the backend and then bursting it onto the
             * entire edit page appropriately.
             */

            /**
             * Technically done at the very start.
             */
            $scope.unlockObject = function(){
                console.log(&quot;unlockObject function called&quot;);
                var promise = viewService.obtainInformationFromBackEnd( {id: $stateParams.id});
                promise.then(function(resp){
                    $scope.data = resp.data;

                    $scope.unpackObject();
                }, function(error){
                    console.log(&quot;ERROR GETTTING OBJECT!!!!!!&quot;);
                });

                $scope.mockObjectRecieved = $scope.data;
            };
            $scope.unlockObject();


            $scope.unpackObject = function(){

                console.log(&quot;Unpack object called upon: &quot; + $scope.data);
                //console.log($scope.data);
                $scope.personId= $scope.data.person.data.id; //Unique identifier for the person.
                //console.log($scope.personId);

                $scope.firstName = $scope.data.person.data.name.split(&quot; &quot;)[0];
                //console.log($scope.firstName);

                $scope.lastName = $scope.data.person.data.name.split(&quot; &quot;)[1];
                //console.log($scope.lastName);

                $scope.currentPositionTitle = $scope.data.person.data.position;
                //console.log($scope.currentPositionTitle);

                $scope.currentInstitutionName = $scope.data.person.institution.name;
                //console.log($scope.currentInstitutionName);

                $scope.currentInstitutionId = $scope.data.person.institution.id;
                //console.log($scope.currentInstitutionId);


                $scope.postDocInformation = $scope.data.mentors;
                //console.log($scope.postDocInformation);

                $scope.degreeInformation = $scope.data.supervisors;
                //console.log($scope.degreeInformation);

                $scope.superDocInformation = $scope.data.mentored;
                //console.log($scope.superDocInformation);

                $scope.superDegInformation = $scope.data.supervised;
                console.log($scope.superDegInformation);

            };


            /**
             * Constructor...
             */
            function EditPageModelObject(){
                person:{
                    data:{
                        name = null;
                    }
                }

            }

            /**
             * The final function that prepares the editPageModelObject to be sent to the backend.
             * Loads any differences found into the editPageModelObject! :)
             */
            $scope.finalEditFunction = function(){

                var editPageModelObject = new EditPageModelObject;
                //compare name located within the data object to the submitted name.
                var name = $scope.firstName + &quot; &quot; + $scope.lastName;
                if(name !== $scope.data.person.data.name){
                    editPageModelObject.person.data.name = name;
                    console.log(&quot;name diff&quot;);
                }

                //compare the title
                if($scope.currentPositionTitle !== $scope.data.person.data.position){
                    editPageModelObject.person.data.position = $scope.currentPositionTitle;
                }

                //compare the institution name
                if($scope.currentInstitutionName !== $scope.data.person.institution.name){
                    editPageModelObject.person.institution.name = $scope.currentInstitutionName;
                }

                //Crudely compare mentors
                if($scope.postDocInformation !== $scope.data.mentors){
                    editPageModelObject.mentors = $scope.postDocInformation;
                }

                if($scope.degreeInformation !== $scope.data.supervisors){
                    editPageModelObject.supervisors = $scope.degreeInformation;
                }

                if($scope.superDocInformation !== $scope.data.mentored){
                    editPageModelObject.mentored = $scope.superDocInformation;
                }

                if($scope.superDegInformation !== $scope.data.supervised){
                    editPageModelObject.supervised = $scope.superDegInformation;
                }


                console.log(editPageModelObject);
            };





            console.log(&quot;scope data: &quot; + $scope.data);

            /**
             * SUEPRVISED POSTDOCS SECTION YES THIS IS A MESS HERE BUT IT MUST BE DONE FASTT!!!! AHHHHHHH!!!!!!!!!!!!!
             * @type {*[]}
             */

            $scope.postdocSupervisionVisibility = false;
            $scope.superDocStartYear = null;
            $scope.superDocEndYear = null;
            $scope.superDocInstitution = null;
            $scope.superdocNameOfPerson = null;


            /**
             * Object for SuperDoc
             * @param superDocNameOfPerson
             * @param superDocStartYear
             * @param superDocEndYear
             * @param superDocInstitution
             * @constructor
             */
            function SuperDocInstance(superDocNameOfPerson, superDocStartYear, superDocEndYear, superDocInstitution)
            {
                this.superDocNameOfPerson = superDocNameOfPerson,
                    this.superDocStartYear = superDocStartYear,
                    this.superDocEndYear = superDocEndYear,
                    this.superDocInstitution = superDocInstitution
            }


            $scope.addSuperDocInstance = function(superDocNameOfPerson, superDocStartYear, superDocEndYear, superDocInstitution){
                var newSuperDocInstance = new SuperDocInstance(superDocNameOfPerson, superDocStartYear, superDocEndYear, superDocInstitution);
                $scope.superDocInformation.push(newSuperDocInstance);
                console.log(&quot;addSuperDocInstance Called on&quot; + $scope.superDocInformation);


            };


            /**
             * Initialize superDoc array as an empty array. Will hold SuperDoc objects :)!
             * @type {Array}
             */
            $scope.superDocInformation = [ ];


            $scope.showSuperDocInfo = function(){
                $scope.postdocSupervisionVisibility = true;
            };

            $scope.hideSuperDocInfo = function(){
                $scope.postdocSupervisionVisibility = false;
            };


            $scope.removeSuperDocInstance = function(superDocInstance){
                console.log(&quot;removeSuperDocInstance called with index&quot; + superDocInstance);
                console.log($scope.superDocInformation.length);

                var index = $scope.superDocInformation.indexOf(superDocInstance);
                console.log($scope.superDocInformation.length);
                //Splice out the entry that is desired to be removed.
                $scope.superDocInformation.splice(index,1);
                console.log($scope.superDocInformation);
            };

            /**
             * SUPERDEGREE SECTION
             * @type {*[]}
             */


            /**
             * Super degree variables.
             * @type {boolean}
             */
            $scope.superDegVisibility = false;

            //
            //$scope.superDegStartYear = null;
            //$scope.superDegEndYear = null;
            //$scope.superDegInstitution = null;

            $scope.superDegNameOfPerson = null;
            $scope.superDegCurrPosition = null;
            $scope.superDegCurrInst = null;
            $scope.superDegDegType = null;
            $scope.superDegYear = null;
            $scope.superDegInst= null;

            /**
             * Construct a super DEGREE object.
             * @param superDegNameOfPerson
             * @param superDegCurrPosition
             * @param superDegCurrInst
             * @param superDegDegType
             * @param superDegYear
             * @param superDegInst
             * @constructor
             */
            function SuperDegInstance(superDegNameOfPerson,superDegCurrPosition, superDegCurrInst, superDegDegType, superDegYear, superDegInst)
            {
                this.superDegNameOfPerson = superDegNameOfPerson,
                this.superDegCurrPosition = superDegCurrPosition,
                    this.superDegCurrInst = superDegCurrInst,
                    this.superDegDegType = superDegDegType,
                    this.superDegYear = superDegYear,
                    this.superDegInst = superDegInst
            }


            $scope.addSuperDegInstance = function(superDegNameOfPerson, superDegCurrPosition, superDegCurrInst, superDegDegType, superDegYear, superDegInst){
                var newSuperDegInstance = new SuperDegInstance(superDegNameOfPerson, superDegCurrPosition, superDegCurrInst, superDegDegType, superDegYear, superDegInst);
                $scope.superDegInformation.push(newSuperDegInstance);
                console.log(&quot;addSuperDegInstance Called on&quot; + $scope.superDegInformation);


            };


            $scope.showSuperDegInfo = function(){
                $scope.superDegVisibility = true;
            };

            $scope.hideSuperDegInfo = function(){
                $scope.superDegVisibility = false;
            };

            /**
             * Initialize as an empty array, for now. Will be populated with SUPER DEGREE objects.
             * @type {Array}
             */
            $scope.superDegInformation = [ ] ;

            $scope.removeSuperDegInstance = function(superDegInstance){
                console.log(&quot;removeSuperDegInstance called with index&quot; + superDegInstance);
                console.log($scope.superDegInformation.length);

                var index = $scope.superDegInformation.indexOf(superDegInstance);
                console.log($scope.superDegInformation.length);
                //Splice out the entry that is desired to be removed.
                $scope.superDegInformation.splice(index,1);
                console.log($scope.superDegInformation);
            };


            /**
             * OTHER STUFFS
             * @type {*[]}
             */




                //Postdoc Variables.
            $scope.postDocTabs = postDocTab; //Formally assigning the list above to the scope tab variable.
            $scope.selectedIndex = 2; //Index that the tabs start at.
            $scope.postDocID = 3; //Only set to 3 here for the sample data. Set back to 1 for release.

            //Degree Info variables.
            $scope.degreeInfoTabs = degreeInfoTab; //Formally assigning the list above to the scope tab variable.
            $scope.degreeInfoSelectedIndex = 1; //Index that the tabs start at.
            $scope.degreeInfoID = 2; //Only set to 3 here for the sample data. Set back to 1 for release.


            //The data object obtained from the backend.
            $scope.data = null;

            /**
             * This function will be how I retrieve the proper object from the backend, through the editService
             * file.
             */
            //$scope.realObjectFromBackend = obtainUserInformationFromBackEnd


            /**
             * Function called at the very start of this page&#x27;s creation.
             * Responsible for calling to the backend through the services to obtain the edit page object.
             */
            $scope.buildEditPage = function(){
                var promise = editService.obtainUserInformationFromBackEnd(1);
                promise.then(function(resp){
                  $scope.data = resp;
                }, function(error){
                    console.log(&quot;ERROR GETTTING OBJECT!!!!!!&quot;);
                });

            };
            /**
             * Mock Object. This is what I will be expecting to recieve from the backend throughthe function
             * &quot;obtainUserInformationFromBackEnd&quot;.
             */

            $scope.mockObjectRecieved = {

                name: &quot;Cheese Knight&quot;,
                currentPositionTitle: &quot;Honorable Knight of Cheese&quot;,
                currentInstitutionName: &quot;NeverEverLand&quot;,
                postDocInformation:[{
                    pdStartYear: 2078, pdSupervisor: &quot;the cheese goddess&quot;, pdInstitution: &quot;NeverEverLand&quot;, pdEndYear: &quot;0007&quot;
                }],

                degreeInformation:[{
                    year: &quot;2973&quot;, supervisor: &quot;Cheese King&quot;, institution: &quot;University of NeverEverLand&quot;, type:  &quot;Doctorate&quot;

                }],

                superDocInformation:[{
                    superDocNameOfPerson: &quot;Onion Knighty&quot;,
                    superDocStartYear: &quot;1991&quot;,
                    superDocEndYear: &quot;99999&quot;,
                    superDocInstitution: &quot;onion academy&quot;
                }],

                superDegInformation:[{
                    superDegNameOfPerson: &quot;fromage mon dieu&quot;
                }]
            };





            function SubmissionPageModelObject(firstName, lastName, currentPositionTitle,
                                               currentInstitutionName, postDocInformation, degreeInformation)
            {
                //Concatenating the first and last name together with a space between for now...
                var concatednatedNames = firstName + &quot; &quot; + lastName;
                this.name = concatednatedNames ;
                this.currentPositionTitle = currentPositionTitle;
                this.currentInstitutionName = currentInstitutionName;

                //Now the arrays of postdoc appointments and degrees.
                this.postDocInformation = postDocInformation;
                this.degreeInformation = degreeInformation;
            }

            /**SPECIFIC TO EDIT FUNCTIONALITY! **/

            /**Basic Info Section:
             * This section deals with trivial information collection on the submit page such as first and last names.
             */
            //$scope.firstName = $scope.mockObjectRecieved.name.split(&quot; &quot;)[0];
            //$scope.lastName = $scope.mockObjectRecieved.name.split(&quot; &quot;)[1];
            //$scope.currentPositionTitle = $scope.mockObjectRecieved.currentPositionTitle;
            //$scope.currentInstitutionName = $scope.mockObjectRecieved.currentInstitutionName;
            //$scope.degreeInformation = $scope.mockObjectRecieved.degreeInformation;
            //$scope.postDocInformation = $scope.mockObjectRecieved.postDocInformation;
            //$scope.superDegInformation = $scope.mockObjectRecieved.superDegInformation;
            //$scope.superDocInformation = $scope.mockObjectRecieved.superDocInformation;






            /**
             * Simple function that I can invoke when I want to see what the contents of the basic inputs are.
             */
            $scope.testBasicInputs = function(){
                console.log($scope.firstName + &quot; &quot; + $scope.lastName + &quot; &quot; + $scope.title
                    + &quot; &quot; + $scope.currentPositionTitle + &quot; &quot; + $scope.currentInstitutionName);
            };


            /**
             * This function is evoked when the user decides to commit their edits to the page and send it off to
             * the backend of the server.
             *
             * PRIMARY GOAL: Create a brand new object (extremely similar to the submit page) of all of the inputs
             * from the user on this page.
             *
             *
             * SECONDARY GOAL: This second goal is to take the data that we already had given to us from
             * the backend and then to individually element-by-element in the objects check if there was any
             * difference in the edited object (made when this button is hit) and if there is then it is packed
             * into a new object that is a differences object which is sent to the backend.
             *
             * The differences object will contain &quot;nulled&quot; (As a very weird string that likely will be unique in most
             * cases?) if there were no changes in the data. This allows the specific items of concern to be
             * determined by the backend relatively easily. If it is &quot;nulled&quot; then just move on, no changes.
             *
             * This function makes use ot the editServices file to achieve this goal.
             */
            $scope.editMasterButton = function(){
                console.log(&quot;editMasterButton function called&quot;);

                //If the first name field does not have a value, spit out an error and return.
                if($scope.firstName == null || $scope.firstName == undefined || $scope.firstName == &quot;&quot;){
                    console.log(&quot;Error: First Name was not put into the firstname field&quot;);

                    $scope.firstNameWarning = true;
                    return;
                }
                else{
                    $scope.firstNameWarning = false; //If the field is not null set warning to false.
                }

                //If the last name field does not have a value, spit out an error and return.
                if($scope.lastName == null || $scope.lastName == undefined || $scope.lastName == &quot;&quot;){
                    console.log(&quot;Error: Last Name was not entered in the field.&quot;);

                    $scope.lastNameWarning = true;
                    return;
                }
                else{
                    $scope.lastNameWarning = false; //If the field is not null set warning to false.
                }

                //If the curr position field does not have a value, spit out an error and return.
                if($scope.currentPositionTitle == null || $scope.currentPositionTitle == undefined || $scope.currentPositionTitle == &quot;&quot;){
                    console.log(&quot;Error: Current Position Title was not entered into the field.&quot;);
                    $scope.currPositionTitleWarning = true;
                    return;
                }
                else{
                    $scope.currPositionTitleWarning = false; //If the field is not null set warning to false.
                }

                //If the current inst field does not have a value, spit out an error and return.
                if($scope.currentInstitutionName == null || $scope.currentInstitutionName == undefined || $scope.currentInstitutionName == &quot;&quot;){
                    console.log(&quot;Error: Current Institution Name was not entered into the field.&quot;);
                    $scope.currInstNameWarning = true;
                    return;
                }
                else{
                    $scope.currInstNameWarning = false; //If the field is not null set warning to false.
                }

                //Create the new object for the submission page.
                var newSubmitObject = new SubmissionPageModelObject($scope.firstName, $scope.lastName,
                    $scope.currentPositionTitle, $scope.currentInstitutionName, $scope.postDocInformation,
                    $scope.degreeInformation);

                //Create a new repository for information to be put into.
                //If the value is null then there are no changes to be made to the dataset.
                var differenceObject = {
                    name: &quot;nulled&quot;,
                    currentPositionTitle :&quot;nulled&quot;,
                    currentInstitutionName: &quot;nulled&quot;,
                    degreeInformation: &quot;nulled&quot;,
                    postDocInformation: &quot;nulled&quot;

                };


                var differenceObject2 = {
                    name: &quot;fromage&quot;,
                    currentPositionTitle :&quot;cheese knight!&quot;,
                    currentInstitutionName: &quot;Onion Knights too&quot;,
                    degreeInformation: &quot;nulled&quot;,
                    postDocInformation: &quot;nulled&quot;
                };


                $scope.submitPageObject = newSubmitObject;

                //The goal of this following section is to analyze the contents of the newly created object
                //and the old object. If the fields ARE different then it will parse together a specific object to be
                //sent to the backend indicating the specific fields that need to be changed.

                //console.log(Object.keys($scope.submitPageObject).length);


                //If there are no changes and the objects are equal, then send the completely null-object to the
                //backend.
                if($scope.submitPageObject == $scope.mockObjectRecieved){
                    editService.sendEditedData(differenceObject);
                }

                //If the name is different then load the new name into difference object and send it to backend.
                if($scope.submitPageObject.name != $scope.mockObjectRecieved.name){
                    differenceObject.name = $scope.submitPageObject.name;
                }

                //If the institution name is different, then add it to the difference object. Send it to backend.(ntyet)
                if($scope.submitPageObject.currentInstitutionName != $scope.mockObjectRecieved.currentInstitutionName){
                    differenceObject.currentInstitutionName = $scope.submitPageObject.currentInstitutionName;
                }

                //If the degreeInformation is different, then add it to the difference object.
                if($scope.submitPageObject.degreeInformation != $scope.mockObjectRecieved.degreeInformation){
                    differenceObject.degreeInformation= $scope.submitPageObject.degreeInformation;
                }

                //If the postDocInformation is different, then add it to the difference object.
                if($scope.submitPageObject.postDocInformation != $scope.mockObjectRecieved.postDocInformation){
                    differenceObject.postDocInformation = $scope.submitPageObject.postDocInformation;
                }

                //Once all of these conditionals have been iterated through, take the object and hurl it at the backend.
                editService.sendEditedData(differenceObject);




            };




            /** POSTDOC FUNCTION.
             * This function will add a new tab to the set of tabs that we currently have.
             *
             * @param pdYearStart The dates of the start of the postdoc appointment.
             * @param pdYearEnd The date of the end of the postdoc appointment.
             * @param pdSupervisor The supervisor of the postdoc appointment.
             * @param pdInstitution The institution of the postdoc appointment.
             */
            $scope.addPDInfo = function (pdYearStart, pdYearEnd, pdSupervisor, pdInstitution) {
                //view = view || title + &quot; Content View&quot;;
                var pdID = $scope.postDocID++; //Increment global PostDocID with addition.
                postDocTab.push({ postDocID: pdID, postDocDates: pdDate, postDocSupervisor: pdSupervisor, postDocInstitution: pdInstitution, disabled: false});
            };

            /** POSTDOC FUNCTION
             * This function when evoked will remove the selected tab from the screen.
             * @param tab The tab to be removed.
             */
            $scope.removePDTab = function (tab) {
                $scope.postDocID--; //Decrement global postDocID with removal.
                var index = postDocTab.indexOf(tab);
                postDocTab.splice(index, 1);
            };






            //degreeInfoYear: 1993, degreeInfoSupervisor: &#x27;Ole Hindsgaul&#x27;, degreeInfoInstitution: &#x27;University of Alberta&#x27;

            /** DEGREE INFO FUNCTION.
             * This function when invoked will take the current and then the old tab and then it will combine
             * the data together in such a way that we have the previous now equal to the selected, and then
             * index into the &quot;tabs&quot; list with the current value.
             *
             $scope.$watch(&#x27;degreeInfoSelectedIndex&#x27;, function(current2, old2){
                previous = selected;
                selected = degreeInfoTab[current2];
                if ( old2 + 1 &amp;&amp; (old2 != current2)) $log.debug(&#x27;Goodbye &#x27; + previous.title + &#x27;!&#x27;);
                if ( current2 + 1 )                $log.debug(&#x27;Hello &#x27; + selected.title + &#x27;!&#x27;);
            });*/

            /** DEGREE INFO FUNCTION.
             * This function will add a new tab to the set of tabs that we currently have.
             *
             * @param diYear The year that the degree was obtained.
             * @param diSupervisor The supervisor who oversaw the degree.
             * @param diInstitution The institution that awarded the degree.
             */
            $scope.addDI = function (diYear, diSupervisor, diInstitution) {
                //view = view || title + &quot; Content View&quot;;
                var diID = $scope.degreeInfoID++; //Increment global degreeInfoID with addition.
                degreeInfoTab.push({ degreeInfoID: diID, degreeInfoYear: diYear, degreeInfoSupervisor: diSupervisor, degreeInfoInstitution: diInstitution, disabled: false});
            };

            /** DEGREE INFO FUNCTION
             * This function when evoked will remove the selected tab from the screen.
             *
             * @param tab The tab to be removed.
             */
            $scope.removeDITab = function (tab) {
                $scope.degreeInfoID--; //Decrement global degreeInfoID with removal.
                var index = postDocTab.indexOf(tab);
                degreeInfoTab.splice(index, 1);
            };



            //Set a boolean flag to show or to not show the postdoctoral information
            //Initially false, do not show the postdoc information.
            $scope.postDocVisibility = false;

            /**
             * When invoked will show the postdoc info by setting the flag to true.
             */
            $scope.showPostDocInfo = function(){
                $scope.postDocVisibility = true;
                console.log(&quot;called&quot;);
            };

            /**
             * When invoked will hide the postdoc info by setting the flag to false.
             */
            $scope.hidePostDocInfo = function(){
                $scope.postDocVisibility = false;
            };


            /**
             * Information regarding the postdoc appointments furnished on the submit page.
             *
             */

            $scope.pdEndYear = null;
            $scope.pdStartYear = null;
            $scope.pdSupervisor = null;
            $scope.pdInstitution = null;

            function PostDocInstance(pdStartYear, pdEndYear, pdSupervisor, pdInstitution, pdId, pdApproved)
            {
                this.pdStartYear = pdStartYear,
                    this.pdEndYear = pdEndYear,
                    this.pdSupervisor = pdSupervisor,
                    this.pdInstitution = pdInstitution,
                this.postdoc_approved = pdApproved,
                this.postdoc_id = pdId
            }

            /**
             * Warnings made for the postdoc information empty fields warning to the users.
             */

            $scope.pdStartYearWarning = false;
            $scope.pdEndYearWarning = false;
            $scope.pdSupervisorWarning = false;
            $scope.pdInstitutionWarning = false;



            //$scope.imagePath = &quot;/static/img/new-zealand-679068_1280.jpg&quot;
            /**
             * Function evoked when the submit button is hit on the postdoc card on the submit page.
             * Creates a new postDocInstance (object with postdoc data) with the data in the card&#x27;s fields.
             * Afterwards refreshes the view of the scope.
             *
             * @param pdStartYear Starting year of the postdoc appointment.
             * @param pdEndYear Ending year of the postdoc appointment.
             * @param pdSupervisor Supervisor of the postdoc appointment.
             * @param pdInstitution Institution of the postdoc appointment.
             */
            $scope.addPostDocInstance = function (pdStartYear, pdEndYear, pdSupervisor, pdInstitution, pdId, pdApproved) {

                //Series of statements checking if the postdoc fields are empty or not.
                if(pdStartYear == null || pdStartYear == undefined || pdStartYear == &quot;&quot;){
                    console.log(&quot;error: pdstartyear empty&quot;);
                    $scope.pdStartYearWarning = true;
                    return;
                }else{
                    $scope.pdStartYearWarning = false;
                }

                if(pdEndYear == null || pdEndYear == undefined || pdEndYear == &quot;&quot;){
                    console.log(&quot;error: pdendyear empty&quot;);
                    $scope.pdEndYearWarning = true;
                    return;
                }else{
                    $scope.pdEndYearWarning = false;
                }

                if(pdSupervisor == null || pdSupervisor == undefined || pdSupervisor == &quot;&quot;){
                    console.log(&quot;error: pdsupervisor empty&quot;);
                    $scope.pdSupervisorWarning = true;
                    return;
                }else{
                    $scope.pdSupervisorWarning = false;
                }

                if(pdInstitution == undefined || pdInstitution == null || pdInstitution == &quot;&quot;){
                    console.log(&quot;error: pdinstitution empty&quot;);
                    $scope.pdInstitutionWarning = true;
                    alert(&quot;String&quot;);
                    console.log(pdInstitution);
                    return;
                }else{
                    $scope.pdInstitutionWarning = false;
                    alert(&quot;alert value: &quot; + pdInstitution);
                    console.log(pdInstitution);
                }

                var newPostDocInstance = new PostDocInstance(pdStartYear,pdEndYear,pdSupervisor,pdInstitution, pdId, pdApproved);
                $scope.postDocInformation.push(newPostDocInstance);
                console.log(&quot;AddPostDocInstance Called on&quot; + $scope.postDocInformation);

                //&quot;Clear&quot; all of the fields.
                pdEndYear = null;
                pdStartYear= &quot;&quot;;
                pdSupervisor = &quot;&quot;;
                pdInstitution = &quot;&quot;;
            };

            $scope.editPostDoc = function(){
                console.log(&quot;editPostDoc function called&quot;);


            };


            /**
             $scope.clearPostDocFields = function(){
                pdStartYear = &quot;&quot;;
                pdEndYear = &quot;&quot;;
                pdSupervisor = &quot;&quot;;
                pdInstitution = &quot;&quot;;
                console.log(&quot;clearPostDocFields called! :)&quot;);
            }; **/


            /**
             * Function that when invoked will remove the selected postdoc instance from the submit page and
             * the particular individual&#x27;s object model.
             * @param postDocInstanceIndex of the postDocInformation array that should be removed.
             */
            $scope.removePostDocInstance = function(postDocInstance){
                console.log(&quot;removePostDocInstance called with index&quot; + postDocInstance);
                console.log($scope.postDocInformation.length);

                var index = $scope.postDocInformation.indexOf(postDocInstance);
                console.log($scope.postDocInformation.length);
                //Splice out the entry that is desired to be removed.
                $scope.postDocInformation.splice(index,1);
                console.log($scope.postDocInformation);


            };


            /** Degrees Section:
             * This section deals with the cards associated with the degrees a user may have.
             */



            //Set to false to hide the details of the degree info information.
            $scope.degreeInfoVisibility = false;


            /**
             * Shows the degree info information when invoked.
             */
            $scope.showDegreeInfo = function(){
                $scope.degreeInfoVisibility = true;
            };

            /**
             * Hides the degree info information when invoked.
             */
            $scope.hideDegreeInfo = function(){
                $scope.degreeInfoVisibility = false;
            };



            /**
             * Information regarding the postdoc appointments furnished on the submit page.
             *
             */
            $scope.diYear = null;
            $scope.diSupervisor = null;
            $scope.diInstitution = null;
            $scope.diType = null;


            /**
             * Constructor for the DegreeInfoInstance Object.
             * This is the object that holds together the information of a single degree for a particular individual.
             *
             * @param diYear Year of the degree being awarded.
             * @param diSupervisor Supervisor of the degree.
             * @param diInstitution Institution degree was awarded from.
             * @param diType Type of this degree.
             * @param diId id of degree.
             * @param supervisionId id of supervisor.
             *
             * @constructor
             */
            function DegreeInfoInstance(diYear, diSupervisor, diInstitution, diType, diId, supervisionId)
            {
                this.year = diYear;
                this.supervisor = diSupervisor;
                this.institution = diInstitution;
                this.type = diType;
                this.degree_id = diId;
                this.degree_approved = false;
                this.supervision_id = supervisionId;
                this.supervision_approved = false;

            }


            /**
             * Warnings for degree information fields being empty! :(
             *
             */
            $scope.diYearWarning = false;
            $scope.diSupervisorWarning = false;
            $scope.diInstitutionWarning = false;
            $scope.diTypeWarning = false;

            /**
             *
             * @param diYear Year of the degree being awarded.
             * @param diSupervisor Supervisor of the degree.
             * @param diInstitution Institution degree was awarded from.
             * @param diType Type of this degree.
             * @param diId id of degree.
             * @param supervisionId id of supervisor.
             */
            $scope.addDegreeInfoInstance = function (diYear, diSupervisor, diInstitution, diType, diId, supervisionId) {


                if(diYear == null || diYear == undefined || diYear == &quot;&quot;){
                    console.log(&quot;degree year is not filled out!&quot;);
                    $scope.diYearWarning = true;
                    return;
                }
                else{
                    $scope.diYearWarning = false;
                }


                if(diSupervisor == null || diSupervisor == undefined || diSupervisor == &quot;&quot;){
                    console.log(&quot;degree info supervisor is not filled out!&quot;);
                    $scope.diSupervisorWarning = true;
                    return;
                }else{
                    $scope.diSupervisorWarning = false;
                }

                if(diInstitution == null || diInstitution == undefined || diInstitution == &quot;&quot;){
                    console.log(&quot;degree info instituttion is not filled out!&quot;);
                    $scope.diInstitutionWarning = true;
                    return;
                }else{
                    $scope.diInstitutionWarning = false;
                }
                if(diType == null || diType == undefined || diType == &quot;&quot;){
                    console.log(&quot;degree info type is not filled out!&quot;);
                    $scope.diTypeWarning = true;
                    return;
                }else{
                    $scope.diTypeWarning = false;
                }
                var newDegreeInfoInstance = new DegreeInfoInstance(diYear, diSupervisor, diInstitution, diType, idId, supervisionId);
                $scope.degreeInformation.push(newDegreeInfoInstance);
                console.log(&quot;AddPostDocInstance Called on&quot; + $scope.degreeInfoInformation);


                //Refresh the view of the scope.
                $scope.$apply();
            };

            /**
             * Removes the object passed in from the individual&#x27;s degree information.
             *
             * @param degreeInfoInstance The degree that is desired to be removed.
             */
            $scope.removeDegreeInfoInstance = function(degreeInfoInstance){
                console.log(&quot;removePostDocInstance called with index&quot; + degreeInfoInstance);
                console.log($scope.postDocInformation.length);

                var index = $scope.degreeInformation.indexOf(degreeInfoInstance);
                console.log($scope.degreeInformation.length);
                //Splice out the entry that is desired to be removed.
                $scope.degreeInformation.splice(index,1);
                console.log($scope.degreeInformation);
            };



            //Order by date descending. &lt;- for the output to the user.







            /** MODEL AND FINAL SUBMISSION
             * This is the model for this submission page.
             * First name, last name, title, degree type, current position title, current institution, postdoc info
             *
             * @type {{usersFirstName: null, usersLastName: null, usersTitle: null, usersDegreeType: null, usersCurrentPositionTitle: null, usersCurrentInstitutionName: null, usersPostDocInfo: *[]}}
             */


            /**
             *  This is the constructor for bundling all of the submission page information into one object.
             *  Called by hitting the final submission button, which evokes a function that plops this together.
             *
             *  Params are self explanitory I&#x27;d hope?
             * @param firstName
             * @param lastName
             * @param currentPositionTitle
             * @param currentInstitutionName
             * @param postDocInformation
             */
            function SubmissionPageModelObject(firstName, lastName, currentPositionTitle,
                                               currentInstitutionName, postDocInformation, degreeInformation)
            {
                //Single units of data for this object.
                //this.firstName = firstName;
                //this.lastName = lastName;

                //Concatenating the first and last name together with a space between for now...
                this.id = $scope.data.person.data.id;

                var concatednatedNames = firstName + &quot; &quot; + lastName;
                this.name = concatednatedNames ;

                this.approved =  false;

                this.currentPositionTitle = currentPositionTitle;
                this.currentInstitutionName = currentInstitutionName;



                //Now the arrays.
                this.postDocInformation = postDocInformation;
                this.degreeInformation = degreeInformation;
            }

            $scope.submitPageObject= null;



            //console.log(&quot;Unpack object called upon: &quot; + $scope.data);
            ////console.log($scope.data);
            //$scope.personId= $scope.data.person.data.id; //Unique identifier for the person.
            ////console.log($scope.personId);
            //
            //$scope.firstName = $scope.data.person.data.name.split(&quot; &quot;)[0];
            ////console.log($scope.firstName);
            //
            //$scope.lastName = $scope.data.person.data.name.split(&quot; &quot;)[1];
            ////console.log($scope.lastName);
            //
            //$scope.currentPositionTitle = $scope.data.person.data.position;
            ////console.log($scope.currentPositionTitle);
            //
            //$scope.currentInstitutionName = $scope.data.person.institution.name;
            ////console.log($scope.currentInstitutionName);
            //
            //$scope.currentInstitutionId = $scope.data.person.institution.id;
            ////console.log($scope.currentInstitutionId);
            //
            //
            //$scope.postDocInformation = $scope.data.mentors;
            ////console.log($scope.postDocInformation);
            //
            //$scope.degreeInformation = $scope.data.supervisors;
            ////console.log($scope.degreeInformation);
            //
            //$scope.superDocInformation = $scope.data.mentored;
            ////console.log($scope.superDocInformation);
            //
            //$scope.superDegInformation = $scope.data.supervised;
            //console.log($scope.superDegInformation);
            //
            //





            /**
             * Warnings for the various input fields. Initially set to false.
             * But if the value is null then it is set to true and pops up a warning message.
             * @type {boolean}
             */
            $scope.firstNameWarning = false;
            $scope.lastNameWarning = false;
            $scope.currPositionTitleWarning = false;
            $scope.currInstNameWarning = false;

            $scope.warningsState = function(){
                console.log(&quot;firstnamewarning: &quot; + $scope.firstNameWarning + &quot; , lastnamewarning: &quot; + $scope.lastNameWarning +
                    &quot;currpositiontitlewarning: &quot; + $scope.currPositionTitleWarning + &quot;currinstnamewarning : &quot; + $scope.currInstNameWarning);
            };


            /**
             * Function evoked when the final submission button is hit, creates a new model object for the entire
             * submission page.
             */
            $scope.finalSubmitButtonFunction = function(){


                //If the first name field does not have a value, spit out an error and return.
                if($scope.firstName == null || $scope.firstName == undefined || $scope.firstName == &quot;&quot;){
                    console.log(&quot;Error: First Name was not put into the firstname field&quot;);

                    $scope.firstNameWarning = true;
                    return;
                }
                else{
                    $scope.firstNameWarning = false; //If the field is not null set warning to false.
                }

                //If the last name field does not have a value, spit out an error and return.
                if($scope.lastName == null || $scope.lastName == undefined || $scope.lastName == &quot;&quot;){
                    console.log(&quot;Error: Last Name was not entered in the field.&quot;);

                    $scope.lastNameWarning = true;
                    return;
                }
                else{
                    $scope.lastNameWarning = false; //If the field is not null set warning to false.
                }

                //If the curr position field does not have a value, spit out an error and return.
                if($scope.currentPositionTitle == null || $scope.currentPositionTitle == undefined || $scope.currentPositionTitle == &quot;&quot;){
                    console.log(&quot;Error: Current Position Title was not entered into the field.&quot;);
                    $scope.currPositionTitleWarning = true;
                    return;
                }
                else{
                    $scope.currPositionTitleWarning = false; //If the field is not null set warning to false.
                }

                //If the current inst field does not have a value, spit out an error and return.
                if($scope.currentInstitutionName == null || $scope.currentInstitutionName == undefined || $scope.currentInstitutionName == &quot;&quot;){
                    console.log(&quot;Error: Current Institution Name was not entered into the field.&quot;);
                    $scope.currInstNameWarning = true;
                    return;
                }
                else{
                    $scope.currInstNameWarning = false; //If the field is not null set warning to false.
                }



                console.log($scope.firstName);
                console.log(&quot;finalSubmitButtonFunction was called&quot;);

                //Create the new object for the submission page.
                var newSubmitObject = new SubmissionPageModelObject($scope.firstName, $scope.lastName,
                    $scope.currentPositionTitle, $scope.currentInstitutionName, $scope.postDocInformation,
                    $scope.degreeInformation);

                $scope.submitPageObject = newSubmitObject;

                //Send data over.
                editService.sendEditedData($scope.submitPageObject, {id: $stateParams.id});


                //Debugging and checking out what is going on here.
                console.log(   &quot;name: &quot; + $scope.name);
                //console.log($scope.lastName);
                console.log(   &quot;currentPositionTitle: &quot; + $scope.currentPositionTitle);
                console.log(   &quot;currentInstName: &quot; + $scope.currentInstitutionName);
                console.log(   &quot;postDocInfo: &quot; + $scope.postDocInformation);


                //Check out the items in the postdoc information list.
                for(var i = 0; i &lt; $scope.postDocInformation.length; i++){
                    console.log($scope.postDocInformation[i]);
                }

                //Check out the items in the degree information list.
                for(i = 0; i &lt; $scope.degreeInformation.length; i++){
                    console.log($scope.degreeInformation[i]);

                }

                console.log($scope.submitPageObject);


            };

            /**
             * Function that once it is called will dump all of the information of the object for this submission
             * page!
             */
            $scope.checkOutTHISObject = function(){
                console.log(&quot;Here are the results of the object of this page&quot;);
                console.log(&quot;Yes, this will be large.&quot;);

                console.log($scope.submitPageObject);



            }


        }]);

    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
